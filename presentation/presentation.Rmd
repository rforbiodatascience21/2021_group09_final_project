---
title: "Final project"
author:
- √Ångela Miranda Segura
- Bernadette Kofoed Christiansen
- Henrik Spiegelhauer
- Ida Frich Hansen
output:
  ioslides_presentation:
    css: slidestyle.css
    df_print: kable
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
library(tidyverse)
library(kableExtra)
knitr::opts_knit$set(root.dir = here::here()) #root dir for file to project root dir
```


## Introduction {.smaller}

The main aim is predicting breast cancer patients chance of survival.  

- [Clean the data](#1)
- [Augment the data](#2)
- [Create some plots](#3)
- [Statistical analysis](#4)
- Create the prediction tool


# Materials and methods
## Materials {.smaller}

We are working with a dataset about Breast Cancer that we have obtained from [kaggle website](https://www.kaggle.com/)

This is the dataset we are working with:


```{r dataset}
clean_augmented_data <- readRDS(file = "/cloud/project/data/03_clean_augmented_combined_breastcancer_data.rds")

summary(clean_augmented_data)
```


## Cleaning the data{.smaller #1}

```{r}
clean_augmented_data %>%
  select(weight, age) %>%
  filter(age<20) %>%
  ggplot(mapping = aes(x = age, y = weight)) +
  geom_point()+
  stat_smooth(method = "lm", col = "red")
```

---

```{r}
x <- data.frame(Before = c("The columns are different types","0, 1, 2 values", "names with /r/n", "Birth date with 3 characters", "Blood type44", "Weird weight/age correlations"), After = c("All the columns are considered as doubles","bolean variables", "Clean names", "Birth date with 4 characters", "Correct blood types only", "Eliminating people under 18 years old"))
x %>% 
 kable() %>%
 kable_styling("striped", full_width = FALSE, font_size = 20) %>%
  kable_classic(full_width = F, html_font = "Cambria") %>%
 column_spec(2, width = "20em") %>%
 row_spec(0, bold = TRUE)
```

For statistical analysis, we have chosen only **women**. 


## Augmenting the data {.smaller #augment}

- We have added more informative columns 
- We have changed the type of the columns

## Statistical analysis {.smaller}

We have created some plots in order to fully understand the data and we have done some statistical analysis like MCA analysis. The plots are shown in the following point: "Results"

# Results {#plots}
## Plots of the data {.smaller}

![Analysis barchart categorical](/cloud/project/results/04_analysis_barchart_categorical_education_to_heartmedicine.png){width=50%}![Analysis barchart categorical](/cloud/project/results/04_analysis_barchart_categorical_gallmedicine_to_condition.png){width=50%}

[//]: #  Cultural variables we don't actually need (education, marital_state)
[//]: #  Variables that affect health (medicines, vicious habits) have a great incidence in [comment]: <>breast cancer patients 
[//]: #  Early menstrual periods before age 12 and starting menopause after age 55 expose women to hormones longer, raising their risk of getting breast cancer

---

![Analysis boxplot of age on condition](/cloud/project/results/04_analysis_box_age_on_condition.png){width=50%}![Analysis boxplot of tumor on condition](/cloud/project/results/04_analysis_box_tumor_on_condition.png){width=50%}

<div style="font-size: 0.75em">
- 
</div>

## Plots {.background_white}

```{r, out.height="500px"}
knitr::include_graphics("/cloud/project/results/04_analysis_boxplot_numeric_variables.png")
```


[//]: #  In the data, most of the people is quite young (under 40)
[//]: #  The treatment age is consistent with the age of the patients
[//]: #  The thickness tumor is the most changing variable


---

![Analysis count alcohol on condition](/cloud/project/results/04_analysis_count_alcohol_on_condition.png){width=50%}![Analysis count blood pressure medicine on condition](/cloud/project/results/04_analysis_count_blood_pressure_medicine_on_condition.png){width=50%}

![Analysis count gallbladder medicine on condition](/cloud/project/results/04_analysis_count_gallblader_medicine_on_condition.png){width=50%}![Analysis count heart medicine on condition](/cloud/project/results/04_analysis_count_heart_medicine_on_condition.png){width=50%}

---

![Analysis count on condition](/cloud/project/results/04_analysis_count_radiation_on_condition.png){width=50%}![Analysis count heart medicine on condition](/cloud/project/results/04_analysis_count_smoking_on_condition.png){width=50%}


[//]: #  In all the cases, the recovered fraction is the lowest one.
[//]: #  In the radiation history, the patients who have not suffered from radiation have [comment]: <>recovered better than the ones that have had radiation.
[//]: #  In most cases, when having taken medicine the recovery is better.
[//]: #  In most cases, when having taking medicine the death is higher (no sense).
[//]: #  Not drinking alcohol or smoking improves recovery.
[//]: #  When taking alcohol and smoking the death is lower (it doesn't make any sense)
[//]: #  These are absolute values, maybe we should calculate some relative values

---

![Analysis count on condition](/cloud/project/results/05_analysis_ii_densitograms_on_condition.png){width=50%}![Analysis count heart medicine on condition](/cloud/project/results/05_analysis_ii_densitograms_on_tumor.png){width=50%}

[//]: #  Above 40 years old, the possibilities for recovering from a breast cancer are higher
[//]: #  The weight is higher in recovered patients
[//]: #  Patients who died weighted very low (around 25 kg)
[//]: #  In addition, other group of persons who died weighted 75 kg
[//]: #  Thickness of tumor is bigger in patients who died

---

```{r, out.width = "800px", out.height="600px"}
knitr::include_graphics("/cloud/project/results/06_analysis_iii_histogram_medicine_tumor.png")
```


[//]: #  When the tumor thickness augments, the medical treatment has more impact

---

```{r, out.width = "800px", out.height="600px"}
knitr::include_graphics("/cloud/project/results/07_heatmap.png")
```


[//]: #  The birth date is totally correlated to the treatment age with negative values
[//]: #  So it is the age, but with positive values
[//]: #  There is no a clear relation between the thickness tumor and the rest of variables

---

```{r, out.width = "600px", out.height="600px"}
knitr::include_graphics("/cloud/project/results/08_gif_birth_age_treatment_age.gif")
```

[//]: # Along the years, the patients are treated before
[//]: # Along the years, the education levels are more diverse
[//]: #  The age of first giving birth is more or less consistent along the years
[//]: #  When the age of treatment is reduced, the thickness tumor is more diverse




---

![MCA_contour_conditions](/cloud/project/results/09_MCA_contour_conditions.png){width=50%}![HMCA_contour_tumorType](/cloud/project/results/09_MCA_contour_tumorType.png){width=50%}

<div style="font-size: 0.75em">
- 
</div>

# Discussion {#statistics}
## Discussion {.smaller}
# Conclusion

---

We have reached the following conclusions

# Bibliography

## Bibliography {.smaller}

- Breast cancer incidence (invasive) statistics (10 March 2020). [Cancer Research UK](https://www.cancerresearchuk.org/health-professional/cancer-statistics/statistics-by-cancer-type/breast-cancer/incidence-invasive#heading-One)
- Height Percentile Calculator for Men and Women in the United States. [DQYDJ](https://dqydj.com/height-percentile-calculator-for-men-and-women/)
- Weight Gain After Breast Cancer Diagnosis May Be a Bigger Issue Than Thought in Australia (13 March 2020) [BreastCancer.org](https://www.breastcancer.org/research-news/gaining-weight-after-dx-big-problem-in-australia#:~:text=The%20survey%20found%20that%20nearly,diagnosed%20was%20about%20157%20pounds).

[//]: # Incidence of breast cancer at different ages

[//]: # Normal weight of women and explains why we have eliminated women under 20 years old and 35kg (it's not common, but not impossible)

[//]: # There is a gain weight in breast cancer patients, but it is low so we don't take it in consideration

---

<div id="final_box">
<div class="final">THANK YOU</div> 
<div class="final"> FOR YOUR ATTENTION</div>
</div>





